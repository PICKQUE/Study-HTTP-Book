# 3 第三章HTTP报文内的HTTP信息
## 3.1 HTTP报文
用于HTTP协议交互

报文首部

空行（CR + LF）

报文主体
## 3.2 请求报文及响应报文的结构

报文构成			| 请求报文		| 响应报文 	|
:--------:		| :----:		| :-----: |
报文首部			|请求行			|状态行		|
					|请求首部字段	|响应首部字段|
					|通用首部字段	|通用首部字段|
					|实体首部字段	|实体首部字段|
					|其他			|其他		 |
空行（CR + LF） 	|	
报文主体			|

* **请求行**

包含请求的方法，请求`URI`和`HTTP`版本。

* **状态行**

包含表明响应结果的状态码，原因短语和`HTTP`版本。

* **首部字段**

包含表示请求和响应的各种条件和属性的各类首部。

* **其他**

可能包含`HTTP`的`RFC`里未定义的首部（Cookie等）。

## 3.3 编码提升传输速率
### 3.3.1 报文主体和实体主体的差异

* **报文**（`message`）

是HTTP通信中的基本单文，由8位组字节流（`octet sequence`，其中`octet`为8个比特）组成，通过`HTTP`通信传输

* **实体**（`entity`）

作为请求或响应的有效载荷数据（补充项）被传输，其内容**由实体首部和实体(`报文`)主体组成**。

`HTTP`报文的主体用于传输请求或响应的实体主体。

通常，报文主体等于实体主体。只有当传输中进行编码操作时，实体主体的内容发生变化，才导致它和报文主体产生差异。

### 3.3.2 压缩传输的内容编码

常用的内容编码有以下几种。

* **gzip（GNU zip）**
* **compress**（**UNIX**系统的标准压缩）
* **deflate（zlib）**
* **identity**（不进行编码）

### 3.3.3 分割发送的分块传输编码
## 3.4 发送多种数据的多部分对象集合

* **multipart/form-data**

在`Web`表单文件上传时使用

* **multipart/byteranges**
* **multipart/form-data**
* **multipart/byteranges**
## 3.5 获取部分内容的范围请求
## 3.6 内容协商返回最合适的内容

当浏览器的默认语言为英语或中文，访问相同URI的Web页面时，则会显示对应的英语版或者中文版的Web页面。这样的机制称为内容协商（Content Negotiation）。

包含在请求报文中的某些首部字段（如下）就是判断的基准。这些首部字段的详细说明下章介绍。

* **Accept**
* **Accept-Charset**
* **Accept-Encoding**
* **Accept-Language**
* **Content-Language**

内容协商技术的三种类型

**服务器驱动协商**

由服务器端进行内容协商。以请求的首部字段为参考，在服务器端自动处理。

**客户端驱动协商**

由客户端进行内容协商的方式。用户从浏览器显示的可选项列表中手动选择。

**透明协商**

是服务器驱动和客户端驱动的结合体，是由服务器端和客户端各自进行内容协商的一种方法。






